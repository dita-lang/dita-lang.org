---
layout: base.njk
title: 'Example: Key definition with key reference'
description: 'When a key definition also specifies a key reference, the key reference must also be resolved in order to determine the effective resources bound to that key definition.'
index: '../../toc.html'
notices: '../../resources/oasis-notices.html'
commit: '1ef1836fa5adc371402b2e9d6b31fef551ef88ff'
repository: 'oasis-tcs/dita'
classes: ''
---

<nav class="col-lg-3" role="toc"><ul><li><a href="../../introduction/dita-release-overview.html">Introduction to DITA 1.3</a></li><li><a href="../../archSpec/archSpec-learningTraining.html">Architectural specification: All-inclusive edition </a><ul class="nav nav-list"><li><a href="../../archSpec/base/introduction-to-dita.html">Introduction to DITA</a></li><li><a href="../../archSpec/base/ditamarkup.html">DITA markup </a></li><li><a href="../../archSpec/base/ditaaddressing.html">DITA addressing</a><ul class="nav nav-list"><li><a href="../../archSpec/base/id.html">ID attribute</a></li><li><a href="../../archSpec/base/dita-linking.html">DITA linking</a></li><li><a href="../../archSpec/base/uri-based-addressing.html">URI-based (direct) addressing</a></li><li><a href="../../archSpec/base/key-based-addressing.html">Indirect key-based addressing</a><ul class="nav nav-list"><li><a href="../../archSpec/base/keys-core-concepts.html">Core concepts for working with keys</a></li><li><a href="../../archSpec/base/keyScopes.html">Key scopes</a></li><li><a href="../../archSpec/base/using-keys-for-addressing.html">Using keys for addressing</a></li><li><a href="../../archSpec/base/using-keys-to-address-keys-across-scopes.html">Addressing keys across scopes</a></li><li><a href="../../archSpec/base/links-between-maps.html">Cross-deliverable addressing and linking</a></li><li><a href="../../archSpec/base/processing-key-references-general.html">Processing key references</a></li><li><a href="../../archSpec/base/processing-keyref-for-links.html">Processing key references for navigation links and images</a></li><li><a href="../../archSpec/base/processing-keyref-on-topicref.html">Processing key references on topicref elements</a></li><li><a href="../../archSpec/base/processing-keyref-for-text.html">Processing key references to generate text or link text</a></li><li><a href="../../archSpec/base/examples-of-keys.html">Examples of keys</a><ul class="nav nav-list"><li><a href="../../archSpec/base/example-key-definition.html">Examples: Key definition</a></li><li><a href="../../archSpec/base/example-key-definition-for-variable-text.html">Examples: Key definitions for variable text</a></li><li><a href="../../archSpec/base/example-scoped-keys-for-variable-text.html">Example: Scoped key definitions for variable text</a></li><li><a href="../../archSpec/base/example-resolution-of-duplicate-key-definitions.html">Example: Duplicate key definitions within a single map</a></li><li><a href="../../archSpec/base/example-resolution-of-duplicate-key-definitions-multiple-maps.html">Example: Duplicate key definitions across multiple maps</a></li><li class="active"><a href="../../archSpec/base/example-keydef-with-keyref.html">Example: Key definition with key reference</a></li><li><a href="../../archSpec/base/example-scoped-key-references.html">Example: References to scoped keys</a></li><li><a href="../../archSpec/base/example-nested-key-scopes.html">Example: Key definitions in nested key scopes</a></li><li><a href="../../archSpec/base/example-key-use-for-link-redirection.html">Example: Link redirection</a></li><li><a href="../../archSpec/base/example-keys-removing-link.html">Example: Link modification or removal</a></li><li><a href="../../archSpec/base/example-keys-links-to-terms.html">Example: Links from term or keyword elements</a></li><li><a href="../../archSpec/base/example-keys-conref-redirection.html">Example: conref redirection</a></li><li><a href="../../archSpec/base/example-key-scopes-omnibus-publications.html">Example: Key scopes and omnibus publications</a></li><li><a href="../../archSpec/base/example-keys-scope-defining-precedence.html">Example: How key scopes affect key precedence</a></li><li><a href="../../archSpec/base/example-keys-splitting-combining-targets.html">Example: Keys and collaboration</a></li></ul></li></ul></li></ul></li><li><a href="../../archSpec/base/behaviors.html">DITA processing</a></li><li><a href="../../archSpec/base/configuration-specialization-and-constraints.html">Configuration, specialization, generalization, and constraints </a></li><li><a href="../../archSpec/base/coding-requirements.html">Coding practices for DITA grammar files</a></li><li><a href="../../archSpec/technicalContent/technical-content-specializations.html">Technical content specializations</a></li><li><a href="../../archSpec/learningTraining/learning-and-training-specializations.html">Learning and training specializations</a></li></ul></li><li><a href="../../langRef/langRef-learningTraining.html">Language reference: All-inclusive edition</a></li><li><a href="../../conformance/conformance.html">Conformance</a></li><li><a href="../../acknowledgments/acknowledgments.html">Acknowledgments</a></li><li><a href="../../non-normative/non-normative-information.html">Non-normative information</a></li><li><a href="../../contentmodels/cmlt.html">Content models for learning and training package</a></li></ul></nav><main role="main" class="col-lg-9 non-normative"><article role="article" aria-labelledby="ariaid-title1">
 <h1 class="title topictitle1" id="ariaid-title1">Example: Key definition with key reference</h1>

 <div class="body conbody"><p class="shortdesc">When a key definition also specifies a key reference, the key reference must also be
    resolved in order to determine the effective resources bound to that key definition.</p>
    <p class="p">In the following example, a <code class="keyword markupname xmlelement">&lt;topicref&gt;</code> element references the key
      "widget". The definition for "widget" in turn references the key "mainProduct".</p>
    <pre class="pre codeblock"><code>&lt;map&gt;
  &lt;topicref keyref="widget" id="example"/&gt;
  &lt;keydef keys="widget" href="widgetInfo.dita" scope="local" format="dita" rev="v1r2"
          keyref="mainProduct"&gt;
    &lt;topicmeta&gt;&lt;navtitle&gt;Information about Widget&lt;/navtitle&gt;&lt;/topicmeta&gt;
  &lt;/keydef&gt;
  &lt;keydef keys="mainProduct" href="http://example.com/productPage" scope="external" format="html"
          product="prodCode" audience="sysadmin"&gt;
    &lt;topicmeta&gt;&lt;navtitle&gt;Generic product page&lt;/navtitle&gt;&lt;/topicmeta&gt;
  &lt;/keydef&gt;
&lt;/map&gt;
  </code></pre>
    <p class="p">For this example, the key reference to "widget" pulls resources from that key definition,
      which in turn pulls resources from "mainProduct". The metadata resources from "mainProduct"
      are combined with the resources already specified on the "widget" key definition, resulting in
      the addition of <code class="keyword markupname xmlatt">@product</code> and <code class="keyword markupname xmlatt">@audience</code> values. Along with the
      navigation title, the <code class="keyword markupname xmlatt">@href</code>, <code class="keyword markupname xmlatt">@scope</code>, and
        <code class="keyword markupname xmlatt">@format</code> attributes on the "widget" key definition override those on
      "mainProduct". Thus after key references are resolved, the original reference from
        <code class="keyword markupname xmlelement">&lt;topicref&gt;</code> is equivalent to:</p>
    <pre class="pre codeblock"><code>&lt;topicref id="example"
          href="widgetInfo.dita" scope="local" format="dita" rev="v1r2"
          product="prodCode" audience="sysadmin"&gt;
   &lt;topicmeta&gt;&lt;navtitle&gt;Information about Widget&lt;/navtitle&gt;&lt;/topicmeta&gt;
&lt;/topicref&gt;</code></pre>
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../archSpec/base/examples-of-keys.html" title="This section of the specification contains examples and scenarios. They illustrate a wide variety of ways that keys can be used.">Examples of keys</a></div><div class="previouslink"><strong>Previous topic:</strong> <a class="link" href="../../archSpec/base/example-resolution-of-duplicate-key-definitions-multiple-maps.html" title="In this scenario, the root map contains references to two submaps, each of which defines the same key. The effective key definition depends upon the document order of the direct URI references to the maps.">Example: Duplicate key definitions across multiple maps</a></div><div class="nextlink"><strong>Next topic:</strong> <a class="link" href="../../archSpec/base/example-scoped-key-references.html" title="You can address scoped keys from outside the key scope in which the keys are defined.">Example: References to scoped keys</a></div></div></nav></article></main>
