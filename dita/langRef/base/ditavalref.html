---
# Generated from DITA source
layout: base
title: 'ditavalref'
description: 'The ditavalref element references a DITAVAL document that specifies filter conditions to be used when processing a map or map branch.'
index: '../../toc.html'
notices: '../../resources/oasis-notices.html'
commit: 'adaf2c7cf4d9c09d789de4e79b975464ce855129'
repository: 'oasis-tcs/dita'
---

<nav role="toc" class="col-lg-3"><ul><li><a href="../../introduction/dita-release-overview.html">Introduction</a></li><li><a href="../../archSpec/base/dita-terminology.html">DITA terminology, notation, and conventions</a></li><li><a href="../../archSpec/base/introduction-to-dita.html">Overview of DITA</a></li><li><a href="../../archSpec/base/accessibility-and-translation.html">Accessibility and translation</a></li><li><a href="../../archSpec/base/dita-map-processing.html">DITA map processing</a></li><li><a href="../../archSpec/base/ditaaddressing.html">DITA addressing</a></li><li><a href="../../archSpec/base/behaviors.html">DITA processing</a></li><li><a href="../../archSpec/base/configuration-specialization-and-constraints.html">Configuration and specialization </a></li><li><a href="../../langRef/langRef-base.html">Element reference</a></li><li><a href="../../conformance/conformance.html">Conformance</a></li><li><a href="../../acknowledgments/acknowledgments.html">Acknowledgments</a></li><li><a href="../../non-normative/aggregated-RFC-2119-statements.html">Aggregated RFC-2119 statements</a></li><li><a href="../../archSpec/base/coding-requirements.html">Coding practices for DITA grammar files</a></li><li><a href="../../non-normative/developing-constraint-and-expansion-modules.html">Constraint modules</a></li><li><a href="../../non-normative/expansion-modules.html">Expansion modules</a></li><li><a href="../../non-normative/elementsMerged.html">Element-by-element recommendations for translators</a></li><li><a href="../../non-normative/formatting-expectations.html">Formatting expectations</a></li><li><a href="../../non-normative/migrating-to-dita-2.0.html">Migrating to DITA 2.0</a></li><li><a href="../../non-normative/basedoctypes.html">OASIS grammar files</a></li><li><a href="../../non-normative/interoperability-considerations.html">Processing interoperability considerations</a></li><li><a href="../../non-normative/revision-history.html">Revision history</a></li></ul></nav><main role="main" class="col-lg-9"><article role="article" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">
      <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code>
   </h1>
   
   
   <div class="body refbody"><p class="shortdesc">The <code class="keyword markupname xmlelement">&lt;ditavalref&gt;</code> element references a DITAVAL document that
    specifies filter conditions to be used when processing a map or map
    branch.</p>
      <span class="undefined_element">
         <span class="undefined_element">Processing expectations</span>
         <span class="undefined_element">When a <span class="undefined_element">ditavalref</span> element is included in a map, the conditions in
        the referenced DITAVAL document are used to filter the elements in the branch. The branch
        includes the parent element that contains the <span class="undefined_element">ditavalref</span> element,
        any child elements, and all resources that are referenced by the parent element or its
        children. While there is no technical restriction that forces
          <span class="undefined_element">ditavalref</span> to appear before peer topic references, placing them
        first is considered a best practice and all examples in the specification will use this
        convention.</span>
         <span class="undefined_element">In the simple case, a map can use <span class="undefined_element">ditavalref</span> as
        follows:<span class="undefined_element">&lt;map&gt;
  &lt;topicref href="sampleBranch.dita" audience="admin"&gt;
    &lt;topicmeta&gt;
      &lt;navtitle&gt;Navigation title for branch&lt;/navtitle&gt;
    &lt;/topicmeta&gt;
    &lt;ditavalref href="conditions.ditaval"/&gt;
    &lt;topicref href="insideBranch.dita" platform="win linux mac"/&gt;
  &lt;/topicref&gt;
  &lt;!-- Other branches not affected by conditions.ditaval --&gt;
&lt;/map&gt;</span>
         </span>
         <span class="undefined_element">The filtering conditions specified in the <span class="undefined_element">conditions.ditaval</span> file
        apply to the following:<span class="undefined_element">
               <span class="undefined_element">The <span class="undefined_element">topicref</span> element that references
              <span class="undefined_element">sampleBranch.dita</span> and all child elements:
              <span class="undefined_element">topicmeta</span>, <span class="undefined_element">navtitle</span>, and
              <span class="undefined_element">topicref</span> elements</span>
               <span class="undefined_element">The <span class="undefined_element">sampleBranch.dita</span> topic</span>
               <span class="undefined_element">The <span class="undefined_element">insideBranch.dita</span> topic</span>
            </span>
         </span>
         <span class="undefined_element">When more than one <span class="undefined_element">ditavalref</span> element is specified in the same
        branch at the same level, the effective result is one copy of the branch for each
          <span class="undefined_element">ditavalref</span> element. If the example above contains a reference to
          <span class="undefined_element">otherConditions.ditaval</span> as a peer to the existing
          <span class="undefined_element">ditavalref</span> element, the rendered version of this map would
        reflect two copies of "Sample branch", each reflecting the conditions that are specified in
        the corresponding DITAVAL document. One copy is created using the conditions in
          <span class="undefined_element">conditions.ditaval</span>, while the other copy uses the conditions from
          <span class="undefined_element">otherConditions.ditaval</span>. Map authors can use specific elements from
        the DITAVAL reference domain to indicate how resources <span class="undefined_element">are</span>
        renamed, or processors <span class="undefined_element">can</span> recover from naming collisions by
        using an alternate naming scheme. See <span class="undefined_element">Limitations</span>
        below for more information.</span>
         <span class="undefined_element">If DITAVAL conditions are specified at multiple levels within a single branch, "exclude"
        conditions that are specified at a higher level take precedence. <span class="undefined_element">In the following branch, assume alternate rules are specified for the condition
            <span class="undefined_element">audience="novice"</span>, with the value set to "exclude" in
            <span class="undefined_element">highLevel.ditaval</span> and "include" in
            <span class="undefined_element">lowLevel.ditaval</span>. In that case, the "exclude" condition specified
          in <span class="undefined_element">highLevel.ditaval</span> takes precedence and so applies to the entire
          branch. This is true regardless of how the "exclude" condition is specified within
            <span class="undefined_element">highLevel.ditaval</span>. That is, there <span class="undefined_element">might</span> be a specific rule for <span class="undefined_element">audience="novice"</span>; alternatively,
          the <span class="undefined_element">audience</span> attribute <span class="undefined_element">might</span> be set to
          "exclude" by default, with no specific condition specified for the value
            <span class="undefined_element">audience="novice"</span>.</span>
            <span class="undefined_element">&lt;topicref href="ancestor.dita"&gt;
  &lt;ditavalref href="highLevel.ditaval"/&gt;
  &lt;topicref href="descendent.dita"&gt;
    &lt;ditavalref href="lowLevel.ditaval"/&gt;
    &lt;!-- Other topicrefs --&gt;
  &lt;/topicref&gt;
&lt;/topicref&gt;</span>
         </span>
         <span class="undefined_element">If a <span class="undefined_element">ditavalref</span> element is used that does not specify the
          <span class="undefined_element">href</span> attribute, the element is still processed but no additional
        filtering is applied. This can be used to create an unfiltered copy of a map branch
        alongside other filtered copies; other aspects of the <span class="undefined_element">ditavalref</span>
        (such as any specified key scope or modified resource name) will still be applied to the
        branch.</span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">Limitations</span>
         <span class="undefined_element">This topic overall has far more processing information than
        seems appropriate for an element reference topic; there is likely a lot of overlap /
        duplication of information contained in the Branch Filtering section of the arch spec. Most
        of this information should be moved there, likely including the full set of
        Limitations.</span>
         <span class="undefined_element">The following limitations apply when using the <span class="undefined_element">ditavalref</span> element;
        these limitations cannot be enforced in a DTD or other XML grammar files.</span>
         <span class="undefined_element">When the use of the <span class="undefined_element">ditavalref</span> element results in multiple copies
        of a branch, resource names within that branch can be controlled with sub-elements of the
        effective <span class="undefined_element">ditavalref</span>. <span class="ph error-statement"></span>For situations where resource names are
        relevant, it is an error condition for multiple <span class="undefined_element">ditavalref</span> elements
        to result in conflicting resource names for different content. For example, the following
        map fragment would result in two distinct copies of  the <span class="undefined_element">c.dita</span> topic
        with the same file
        name:<span class="undefined_element">&lt;topicref href="c.dita"&gt;
  &lt;ditavalref href="one.ditaval"/&gt;
  &lt;ditavalref href="two.ditaval"/&gt;
&lt;/topicref&gt;
</span>
         </span>
         <span class="undefined_element">Processors <span class="undefined_element">MAY</span> recover by using an alternate naming
        scheme for the conflicting copies. <span class="undefined_element">
               <span class="undefined_element">Need more information about what situation the processor is recovering from ...</span>
            </span>
            <span class="undefined_element">For the above, it would be recovering from
          a map that instructs it to create two files of the same name, with different filter
          conditions applied.</span>
         </span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">Specialization hierarchy</span>
         <span class="undefined_element">The <span class="undefined_element">ditavalref</span> element is specialized from
          <span class="undefined_element">topicref</span>. It is defined in the DITAVAL-reference domain
        module.</span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">Attributes</span>
         <span class="undefined_element">The following attributes are available on this element: <span class="undefined_element">
               <span class="undefined_element">universal
                                                  attributes<span class="undefined_element">Universal attributes include:
                                                  <span class="undefined_element">audience</span>, <span class="undefined_element">base</span>,
                                                  <span class="undefined_element">class</span>,
                                                  <span class="undefined_element">conaction</span>,
                                                  <span class="undefined_element">conkeyref</span>,
                                                  <span class="undefined_element">conref</span>,
                                                  <span class="undefined_element">conrefend</span>,
                                                  <span class="undefined_element">deliveryTarget</span>,
                                                  <span class="undefined_element">dir</span>, <span class="undefined_element">id</span>,
                                                  <span class="undefined_element">importance</span>,
                                                  <span class="undefined_element">otherprops</span>,
                                                  <span class="undefined_element">outputclass</span>,
                                                  <span class="undefined_element">platform</span>,
                                                  <span class="undefined_element">product</span>, <span class="undefined_element">props</span>,
                                                  <span class="undefined_element">rev</span>, <span class="undefined_element">status</span>,
                                                  <span class="undefined_element">translate</span>, and
                                                  <span class="undefined_element">xml:lang</span>
                  </span>
               </span>
            </span> (except for <span class="undefined_element">conkeyref</span>,
        which is removed for all elements in this domain), <span class="undefined_element">
               <span class="undefined_element">format</span>
            </span>, <span class="undefined_element">
               <span class="undefined_element">href</span>
            </span>, and <span class="undefined_element">
               <span class="undefined_element">scope</span>
            </span>.</span>
         <span class="undefined_element">For this element:<span class="undefined_element">
               <span class="undefined_element">The <span class="undefined_element">format</span> attribute has a default value of
              <span class="undefined_element">ditaval</span>.</span>
               <span class="undefined_element">The <span class="undefined_element">href</span> attribute specivies a reference to a DITAVAL document. If
            the <span class="undefined_element">href</span> attribute is unspecified, this
              <span class="undefined_element">ditavalref</span> will not result in any new filtering behavior, but
            other aspects of the element are still evaluated.</span>
               <span class="undefined_element">The <span class="undefined_element">processing-role</span> attribute has a default value of
              <span class="undefined_element">resource-only</span>.</span>
            </span>
            <span class="undefined_element">DITA 1.3 said that format MUST be ditaval, and that no
          value other than "resource-only" is valid for processing role. Should these be #FIXED in
          the grammar files?</span>
         </span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">Example</span>
         <span class="undefined_element">See <span class="undefined_element">Examples of branch filtering<span class="undefined_element">The branch filtering examples illustrate the processing expectations         for various scenarios that involve <span class="undefined_element">ditavalref</span> elements. Processing         examples use either before and after sample markup or expanded syntax that shows the         equivalent markup without the <span class="undefined_element">ditavalref</span> elements.</span>
            </span> for several examples of
the <span class="undefined_element">ditavalref</span> element.</span>
      </span>
   </div>
   <nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../langRef/containers/ditaval-d.html" title="The DITAVAL reference domain is used to reference a DITAVAL file that contains conditions that apply only to a subset of a DITA map. It also can be used to replicate a subset of a DITA map for multiple audiences.">DITAVAL-reference domain element</a></div></div></nav>
</article></main>
