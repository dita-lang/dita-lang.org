---
# Generated from DITA source
layout: base
title: 'Example: Managing links when chunking'
description: 'If a topic is referenced more than once and one of those instances involves chunking, links to that topic might be ambiguous. In most of such cases, using key references to keys that are defined directly on the chunked instance of the topic will give the correct result.'
index: '../../toc.html'
notices: '../../resources/oasis-notices.html'
commit: 'adaf2c7cf4d9c09d789de4e79b975464ce855129'
repository: 'oasis-tcs/dita'
---

<nav role="toc" class="col-lg-3"><ul><li><a href="../../introduction/dita-release-overview.html">Introduction</a></li><li><a href="../../archSpec/base/dita-terminology.html">DITA terminology, notation, and conventions</a></li><li><a href="../../archSpec/base/introduction-to-dita.html">Overview of DITA</a></li><li><a href="../../archSpec/base/accessibility-and-translation.html">Accessibility and translation</a></li><li><a href="../../archSpec/base/dita-map-processing.html">DITA map processing</a><ul class="nav nav-list"><li><a href="../../archSpec/base/dita-maps-and-their-usage.html">DITA maps and their usage</a></li><li><a href="../../archSpec/base/subject-scheme-maps-and-usage.html">Subject scheme maps and their usage</a></li><li><a href="../../archSpec/base/map-cascading.html">Metadata cascading</a></li><li><a href="../../archSpec/base/chunking.html">Chunking</a><ul class="nav nav-list"><li><a href="../../archSpec/base/chunk-attribute-overview.html">About the chunk attribute</a></li><li><a href="../../archSpec/base/chunk-attribute-combine.html">Processing chunk="combine"</a></li><li><a href="../../archSpec/base/chunk-attribute-split.html">Processing chunk="split"</a></li><li><a href="../../archSpec/base/chunk-attribute-other-tokens.html">Using the chunk attribute for other purposes</a></li><li><a href="../../archSpec/base/examples-of-chunking.html">Examples of the chunk attribute</a><ul class="nav nav-list"><li><a href="../../archSpec/base/example-chunk-combine-all.html">Example: Using chunk to combine all documents into one</a></li><li><a href="../../archSpec/base/example-chunk-combine-branch.html">Example: Using chunk to render a single document from one or more branches</a></li><li><a href="../../archSpec/base/example-chunk-combine-group.html">Example: Using chunk to combine groups of topics</a></li><li><a href="../../archSpec/base/example-chunk-combine-nested-topics.html">Example: How chunk="combine" effects the map hierarchy</a></li><li><a href="../../archSpec/base/example-chunk-split.html">Example: Using chunk to split documents</a></li><li><a href="../../archSpec/base/example-chunk-split-nested.html">Example: How chunk="split" affects the map hierarchy</a></li><li><a href="../../archSpec/base/example-chunk-ignored.html">Example: When chunk is ignored</a></li><li><a href="../../archSpec/base/example-chunk-combine-within-split.html">Example: Using chunk="combine" when the root map specifies chunk="split"</a></li><li class="active"><a href="../../archSpec/base/example-chunk-managing-links.html">Example: Managing links when chunking</a></li></ul></li></ul></li></ul></li><li><a href="../../archSpec/base/ditaaddressing.html">DITA addressing</a></li><li><a href="../../archSpec/base/behaviors.html">DITA processing</a></li><li><a href="../../archSpec/base/configuration-specialization-and-constraints.html">Configuration and specialization </a></li><li><a href="../../langRef/langRef-base.html">Element reference</a></li><li><a href="../../conformance/conformance.html">Conformance</a></li><li><a href="../../acknowledgments/acknowledgments.html">Acknowledgments</a></li><li><a href="../../non-normative/aggregated-RFC-2119-statements.html">Aggregated RFC-2119 statements</a></li><li><a href="../../archSpec/base/coding-requirements.html">Coding practices for DITA grammar files</a></li><li><a href="../../non-normative/developing-constraint-and-expansion-modules.html">Constraint modules</a></li><li><a href="../../non-normative/expansion-modules.html">Expansion modules</a></li><li><a href="../../non-normative/elementsMerged.html">Element-by-element recommendations for translators</a></li><li><a href="../../non-normative/formatting-expectations.html">Formatting expectations</a></li><li><a href="../../non-normative/migrating-to-dita-2.0.html">Migrating to DITA 2.0</a></li><li><a href="../../non-normative/basedoctypes.html">OASIS grammar files</a></li><li><a href="../../non-normative/interoperability-considerations.html">Processing interoperability considerations</a></li><li><a href="../../non-normative/revision-history.html">Revision history</a></li></ul></nav><main role="main" class="col-lg-9"><article role="article" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">Example: Managing links when chunking</h1>
   
   
   <div class="body conbody"><div class="abstract">
       <span style="color:red;" class="shortdesc">
         If a topic is referenced more than once and
      one of those instances involves chunking, links to that topic might
      be ambiguous. In most of such cases, using key references to keys
      that are defined directly on the chunked instance of the topic will
      give the correct result.
      </span>
   </div>
      <span class="undefined_element">
         <span class="undefined_element">Source map and the topic documents that it references </span>
         <span class="undefined_element">Consider the following DITA map, which is used for all examples in
        this topic:</span>
         <span class="undefined_element">&lt;map&gt;
  &lt;title&gt;Map with chunks and <span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>key definitions<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span>&lt;/title&gt;
  &lt;!-- Key definitions --&gt;
  &lt;keydef href="splitThis.dita" keys="splitThisKey"/&gt;
  &lt;keydef href="splitThis.dita#splitThisChild" keys="splitThisChildKey"/&gt;
  &lt;!-- Navigational structure --&gt;
  &lt;topicref href="splitThis.dita" <span class="undefined_element">chunk="split"</span> keys="explicitSplitKey"/&gt;
  &lt;topicref href="combineThis.dita" <span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>chunk="combine"<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span> keys="combineThisKey"&gt;
    &lt;topicref href="combinedChild.dita" keys="combinedChildKey"/&gt;
  &lt;/topicref&gt;
&lt;/map&gt;
</span>
         <span class="undefined_element">The DITA map references the following topics:</span>
         <span class="undefined_element">
            <span class="undefined_element">&lt;!-- splitThis.dita --&gt;</span>
&lt;topic id="splitThisRoot"&gt;
  &lt;title&gt;Root topic&lt;/title&gt;
  &lt;!-- ... --&gt;
  &lt;topic id="splitThisChild"&gt;
    &lt;title&gt;Child topic&lt;/title&gt;
    &lt;!-- ... --&gt;
  &lt;/topic&gt;
&lt;/topic&gt;</span>
         <span class="undefined_element">
            <span class="undefined_element">&lt;!-- combineThis.dita --&gt;</span>
&lt;topic id="combineThisRoot"&gt;
  &lt;title&gt;Root topic&lt;/title&gt;
  &lt;!-- ... --&gt;
  &lt;topic id="combineThisChild"&gt;
    &lt;title&gt;Child topic&lt;/title&gt;
    &lt;!-- ... --&gt;
  &lt;/topic&gt;
&lt;/topic&gt;</span>
         <span class="undefined_element">
            <span class="undefined_element">&lt;!-- combinedChild.dita --&gt;</span>
&lt;topic id="combinedChildRoot"&gt;
  &lt;title&gt;<span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>Topic in map branch, will be combined with parent topicref<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span>&lt;/title&gt;
  &lt;!-- ... --&gt;
&lt;/topic&gt;</span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">
            <span class="undefined_element">
               <span class="undefined_element"></span>
            </span>Scenario in which the topic documents are
        rendered only once<span class="undefined_element">
               <span class="undefined_element"></span>
            </span>
         </span>
         <span class="undefined_element">Assume that the above map is a root map or a <span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>submap that is referenced in a context that does not include any
          references to the above topic documents.<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">
               <span class="undefined_element"></span>
            </span>The topic documents that are referenced in the
        above map are rendered in the following ways:<span class="undefined_element">
               <span class="undefined_element"></span>
            </span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">
               <span class="undefined_element">splitThis.dita</span>
               <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>, which
            contains two topics,<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span> is rendered as two documents. For
          this example, assume <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>the<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span> processor
          creates two documents with names <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>that are
            based on the topic IDs<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>:
            <span class="undefined_element">splitThisRoot.dita</span> and
            <span class="undefined_element">splitThisChild.dita</span>.</span>
            <span class="undefined_element">The <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>map <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>branch with
            <span class="undefined_element">combineThis.dita</span>
               <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>, which
            contains two topic references,<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span> is rendered as one
          document: <span class="undefined_element">combineThis.dita</span>. <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>The document contains the merged content of both
              <span class="undefined_element">combineThis.dita</span> and
              <span class="undefined_element">combinedChild.dita</span>.<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>
            </span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">
               <span class="undefined_element"></span>
            </span>Links are resolved in the following ways. Note that
        the document names are those listed in the above explanation of how
        the topic documents are rendered in this scenario.<span class="undefined_element">
               <span class="undefined_element"></span>
            </span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">All links <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>that specify<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>
               <span class="undefined_element">href="splitThis.dita"</span>,
            <span class="undefined_element">keyref="splitThisKey"</span>, or
            <span class="undefined_element">keyref="explicitSplitKey"</span> resolve to
            <span class="undefined_element">splitThisRoot.dita</span>
               <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>,
            which is <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>the only rendered instance of the topic.</span>
            <span class="undefined_element">All links <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>that specify<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>
               <span class="undefined_element">href="splitThis.dita#splitThisChild"</span> or
            <span class="undefined_element">keyref="splitThisChildKey"</span> resolve to
            <span class="undefined_element">splitThisChild.dita</span>
               <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>,
            which is <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>the only rendered instance of the topic.</span>
            <span class="undefined_element">All links <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>that specify<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>
               <span class="undefined_element">href="combinedChild.dita"</span> or
            <span class="undefined_element">keyref="combinedChildKey"</span> resolve to that
          topic within <span class="undefined_element">combineThis.dita</span>
               <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>, which is <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>the only rendered instance of
          the topic.</span>
         </span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">
            <span class="undefined_element">
               <span class="undefined_element"></span>
            </span>Scenario in which the topic documents are
        rendered more than once<span class="undefined_element">
               <span class="undefined_element"></span>
            </span>
         </span>
         <span class="undefined_element">Now assume that <span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>the above map is used as a
          submap in another context, where the root map also references the
          three topic documents.<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span> As a result, each of the three topic
        documents (<span class="undefined_element">splitThis.dita</span>,
          <span class="undefined_element">combineThis.dita</span>, and
          <span class="undefined_element">combinedChild.dita</span>) are rendered more than
        once.</span>
         <span class="undefined_element">
            <span class="undefined_element">
               <span class="undefined_element"></span>
            </span>In this scenario, the topic documents
        are rendered in the
        following ways:<span class="undefined_element">
               <span class="undefined_element"></span>
            </span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">The original source document
            <span class="undefined_element">splitThis.dita</span> is rendered twice. Based on
          the map above, assume <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>the<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span> processor
          creates two documents with names <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>that are
            based on the topic IDs<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>, so that topic becomes
            <span class="undefined_element">splitThisRoot.dita</span> and
            <span class="undefined_element">splitThisChild.dita</span>. At the same time,
            <span class="undefined_element">splitThis.dita</span> is rendered <span class="undefined_element">in another
            context</span> as a single document, with a different name.</span>
            <span class="undefined_element">Based on the map above, the branch that starts with the
          original source document <span class="undefined_element">combineThis.dita</span> is
          rendered as one document combined with the content of
            <span class="undefined_element">combinedChild.dita</span>. At the same time,
          those two documents are rendered in another context as individual
          documents. For this example, assume a processor generates the
          combined document using the generated name
            <span class="undefined_element">combinThis-2.dita</span>, while the documents
            <span class="undefined_element">combineThis.dita</span> and
            <span class="undefined_element">combinedChild.dita</span> retain their names in
          the other context.</span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">
               <span class="undefined_element"></span>
            </span>In this scenario, the links to the topic documents
        are now problematic:<span class="undefined_element">
               <span class="undefined_element"></span>
            </span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">All links in this map <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>that use<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span> the
          direct URI references <span class="undefined_element">href="splitThis.dita"</span>,
            <span class="undefined_element">href="splitThis.dita#splitThisChild"</span>,
            <span class="undefined_element">href="combineThis.dita"</span>, or
            <span class="undefined_element">href="combinedChild.dita"</span> are  ambiguous. They
          could <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>resolve to either<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span> the chunked
          instance <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>of the topic documents<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span> or to the
          individual topics in the other context. Implementations will have
          to guess which topic to target: the split or combined instances
            <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>of the topic documents<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span> or the versions
          in the alternate context from the root map.</span>
            <span class="undefined_element">All links <span class="undefined_element">
                  <span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>that specify<span class="undefined_element">
                     <span class="undefined_element"></span>
                  </span>
               </span>
               <span class="undefined_element">keyref="splitThisKey"</span> or
            <span class="undefined_element">keyref="splitThisChildKey"</span> are also ambiguous.
          The key definitions are not associated explicitly with the
          chunked or not-chunked instance. If key scopes are used,
          applications might more reliably guess that the intended target
          is the split copy in this map, but this is not guaranteed.</span>
         </span>
         <span class="undefined_element">All links <span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>that specify<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span>
            <span class="undefined_element">keyref="explicitSplitKey"</span>,
          <span class="undefined_element">keyref="combinedThisKey"</span>, or
          <span class="undefined_element">keyref="combinedChildKey"</span> are unambiguous. These
        links can only resolve to the chunked instance <span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>of the topic documents<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span>, because <span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>the key
          definitions<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span> are defined directly within the chunked
        context.</span>
         <span class="undefined_element">There is no way to unambiguously link to the child document that
        will result from splitting <span class="undefined_element">splitThis.dita</span>.
        This is because a <span class="undefined_element">topicref</span> element that
        specifies <span class="undefined_element">chunk</span> can only associate a key
        definition with the first or root topic in the document. While
        other key definition elements can be used to associate keys with
        other topics in the same document, that can only be done outside of
        the navigation context that uses <span class="undefined_element">chunk</span>
            <span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>. As<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span> a result, a processor cannot guarantee
        whether the intended link target is the split topic from the
        chunked context or a use of the same topic in the second context. </span>
         <span class="undefined_element">It is possible for an implementation to define its own way to
        resolve this ambiguity. <span class="undefined_element">
               <span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>However<span class="undefined_element">
                  <span class="undefined_element"></span>
               </span>
            </span>, if a
        situation requires both multiple instances of split topics and
        unambiguous cross-implementation links to those split topics,
        alternate reuse mechanisms need to be considered.</span>
         <span class="undefined_element">
            <span class="undefined_element">
               <span class="undefined_element">What do we mean by <span class="undefined_element">cross-implementation links</span>?
            Can we rephrase this? Or simply remove the adjective
            "cross-implementation"?</span>
               <span class="undefined_element">I think that the situation that we are targeting involves the following:<span class="undefined_element">
                     <span class="undefined_element">Multiple navigational references to a topic, at least one
                of which is chunked</span>
                     <span class="undefined_element">A need to have unambiguous links to each instance of the
                topic</span>
                  </span>
               </span>
            </span>
         </span>
      </span>
   </div>
   <nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../archSpec/base/examples-of-chunking.html" title="These examples illustrate the processing expectations for various scenarios that involve the chunk attribute. The processing examples use either before and after sample markup or expanded syntax that shows the equivalent markup without the chunk attribute.">Examples of the chunk attribute</a></div></div></nav>
</article></main>
