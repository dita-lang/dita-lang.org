---
# Generated from DITA source
layout: base
title: 'Core concepts for working with keys'
description: 'The concepts described below are critical for a full understanding of keys and key processing.'
index: '../../toc.html'
notices: '../../resources/oasis-notices.html'
commit: 'adaf2c7cf4d9c09d789de4e79b975464ce855129'
repository: 'oasis-tcs/dita'
---

<nav role="toc" class="col-lg-3"><ul><li><a href="../../introduction/dita-release-overview.html">Introduction</a></li><li><a href="../../archSpec/base/dita-terminology.html">DITA terminology, notation, and conventions</a></li><li><a href="../../archSpec/base/introduction-to-dita.html">Overview of DITA</a></li><li><a href="../../archSpec/base/accessibility-and-translation.html">Accessibility and translation</a></li><li><a href="../../archSpec/base/dita-map-processing.html">DITA map processing</a></li><li><a href="../../archSpec/base/ditaaddressing.html">DITA addressing</a><ul class="nav nav-list"><li><a href="../../archSpec/base/id.html">id attribute</a></li><li><a href="../../archSpec/base/dita-linking.html">DITA linking</a></li><li><a href="../../archSpec/base/uri-based-addressing.html">URI-based (direct) addressing</a></li><li><a href="../../archSpec/base/key-based-addressing.html">Indirect key-based addressing</a><ul class="nav nav-list"><li class="active"><a href="../../archSpec/base/keys-core-concepts.html">Core concepts for working with keys</a></li><li><a href="../../archSpec/base/thekeysattribute.html">Setting key names with the keys attribute</a></li><li><a href="../../archSpec/base/thekeyrefattribute.html">The keyref attribute</a></li><li><a href="../../archSpec/base/using-keys-for-addressing.html">Using keys for addressing</a></li><li><a href="../../archSpec/base/keyScopes.html">Key scopes</a></li><li><a href="../../archSpec/base/the-key-scope-attribute.html">The keyscope attribute</a></li><li><a href="../../archSpec/base/using-keys-to-address-keys-across-scopes.html">Addressing keys across scopes</a></li><li><a href="../../archSpec/base/links-between-maps.html">Cross-deliverable addressing and linking</a></li><li><a href="../../archSpec/base/processing-key-references-general.html">Processing key references</a></li><li><a href="../../archSpec/base/processing-keyref-for-links.html">Processing key references for navigation links and images</a></li><li><a href="../../archSpec/base/processing-keyref-on-topicref.html">Processing key references on topicref elements</a></li><li><a href="../../archSpec/base/processing-keyref-for-text.html">Processing key references to generate text or link text</a></li><li><a href="../../archSpec/base/examples-of-keys.html">Examples of keys</a></li><li><a href="../../archSpec/base/examples-of-scoped-keys.html">Examples of scoped keys</a></li></ul></li><li><a href="../../archSpec/base/context-hooks-for-user-assistance.html">Context hooks for user assistance</a></li></ul></li><li><a href="../../archSpec/base/behaviors.html">DITA processing</a></li><li><a href="../../archSpec/base/configuration-specialization-and-constraints.html">Configuration and specialization </a></li><li><a href="../../langRef/langRef-base.html">Element reference</a></li><li><a href="../../conformance/conformance.html">Conformance</a></li><li><a href="../../acknowledgments/acknowledgments.html">Acknowledgments</a></li><li><a href="../../non-normative/aggregated-RFC-2119-statements.html">Aggregated RFC-2119 statements</a></li><li><a href="../../archSpec/base/coding-requirements.html">Coding practices for DITA grammar files</a></li><li><a href="../../non-normative/developing-constraint-and-expansion-modules.html">Constraint modules</a></li><li><a href="../../non-normative/expansion-modules.html">Expansion modules</a></li><li><a href="../../non-normative/elementsMerged.html">Element-by-element recommendations for translators</a></li><li><a href="../../non-normative/formatting-expectations.html">Formatting expectations</a></li><li><a href="../../non-normative/migrating-to-dita-2.0.html">Migrating to DITA 2.0</a></li><li><a href="../../non-normative/basedoctypes.html">OASIS grammar files</a></li><li><a href="../../non-normative/interoperability-considerations.html">Processing interoperability considerations</a></li><li><a href="../../non-normative/revision-history.html">Revision history</a></li></ul></nav><main role="main" class="col-lg-9"><article role="article" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">Core concepts for working with keys</h1>
   
   
   <div class="body conbody"><p class="shortdesc"> The concepts described below are critical for a full understanding of keys and key
  processing.</p>
      <span class="undefined_element">
         <span class="undefined_element">The use of the phases "<span class="undefined_element">map</span> element" or
          "<span class="undefined_element">topicref</span> element" should be interpreted as
          "<span class="undefined_element">map</span> element and any specialization of
          <span class="undefined_element">map</span> element " or " <span class="undefined_element">topicref</span> element or
        any specialization of <span class="undefined_element">topicref</span> element."</span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">Definitions related to keys</span>
         <span class="undefined_element">
            <span class="undefined_element">
               <span class="undefined_element">resource</span>
               <span class="undefined_element">For the purposes of keys and key resolution, one of the following:<span class="undefined_element">
                     <span class="undefined_element">An object addressed by URI</span>
                     <span class="undefined_element">Metadata specified on a resource, such as a <span class="undefined_element">scope</span> or
                  <span class="undefined_element">format</span> attribute</span>
                     <span class="undefined_element">Text or metadata located within a <span class="undefined_element">topicmeta</span> element</span>
                  </span>
               </span>
            </span>
            <span class="undefined_element">
               <span class="undefined_element">key</span>
               <span class="undefined_element">A name for a resource. <span class="undefined_element">See <span class="undefined_element">Using keys for addressing<span class="undefined_element">For topic references, image references, and other link relationships, resources can         be indirectly addressed by using the <span class="undefined_element">keyref</span> attribute. For content         reference relationships, resources can be indirectly addressed by using the             <span class="undefined_element">conkeyref</span> attribute.</span>
                     </span>
              for more information.</span>
               </span>
            </span>
            <span class="undefined_element">
               <span class="undefined_element">key definition</span>
               <span class="undefined_element">A <span class="undefined_element">topicref</span> element that binds one or more key names to <span class="undefined_element">zero or more</span> resources.</span>
            </span>
            <span class="undefined_element">
               <span class="undefined_element">key reference</span>
               <span class="undefined_element">An attribute that references a key, such as <span class="undefined_element">keyref</span> or
              <span class="undefined_element">conkeyref</span>.</span>
            </span>
            <span class="undefined_element">
               <span class="undefined_element">key space</span>
               <span class="undefined_element">A list of key definitions that are used to resolve key references.</span>
            </span>
            <span class="undefined_element">
               <span class="undefined_element">effective key definition</span>
               <span class="undefined_element">The definition for a key within a key space that is used to resolve references to that key.
      A key might have multiple definitions within a key space, but only one of those definitions is
      effective.</span>
            </span>
            <span class="undefined_element">
               <span class="undefined_element">key scope</span>
               <span class="undefined_element">A map or section of a map that defines its own key space and serves as the resolution
      context for its key references.</span>
            </span>
         </span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">Key definitions</span>
         <span class="undefined_element">
            <span class="undefined_element">A key definition binds one or more keys to zero or more resources. <span class="undefined_element">Resources can be:</span>
            </span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">Any <span class="undefined_element">URI-addressed resource</span> that is referenced directly by the
            <span class="undefined_element">href</span> attribute or indirectly by the <span class="undefined_element">keyref</span> attribute
            <span class="undefined_element">on the key definition</span>. References to the key are
          considered references to <span class="undefined_element">the URI-addressed resource</span>.</span>
            <span class="undefined_element">
               <span class="undefined_element">(If the key definition contains a child
              <span class="undefined_element">topicmeta</span> element) The child elements of the
              <span class="undefined_element">topicmeta</span> element.</span> The content of those elements can be
          used to populate the content of elements that reference <span class="undefined_element">the
            key</span>.</span>
         </span>
         <span class="undefined_element">If a key definition does not contain a <span class="undefined_element">topicmeta</span> element and does not
          <span class="undefined_element">refer to</span> a resource by <span class="undefined_element">href</span> or
          <span class="undefined_element">keyref</span>, it is nonetheless a valid key definition. References to the key
        definition are considered resolvable, but no linking or content <span class="undefined_element">transclusion</span> occurs.</span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">Key scopes</span>
         <span class="undefined_element">All key definitions and key references exist within a key scope. <span class="undefined_element">If the <span class="undefined_element">keyscope</span> attribute is never specified within the map hierarchy,
          all keys exist within a single, default key scope.</span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">Additional key scopes are created when the
            <span class="undefined_element">keyscope</span> attribute is used.</span> The <span class="undefined_element">keyscope</span>
        attribute specifies a name or names for the scope. Within a map hierarchy, key scopes are
        bounded by the following:</span>
         <span class="undefined_element">
            <span class="undefined_element">The root map.</span>
            <span class="undefined_element">The root element of submaps <span class="undefined_element">when the root elements of the
            submaps</span> specify the <span class="undefined_element">keyscope</span> attribute</span>
            <span class="undefined_element">Any <span class="undefined_element">topicref</span> elements that specify the <span class="undefined_element">keyscope</span>
          attribute</span>
         </span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">Key spaces</span>
         <span class="undefined_element">The key space associated with a key scope is used to resolve all key references that occur
        immediately within that scope. Key references in child scopes are resolved using the key
        spaces that are associated with those child scopes.</span>
         <span class="undefined_element">A key scope is associated with exactly one key space. That key space contains all key
        definitions that are located directly within the scope; it <span class="undefined_element">might</span> also contain definitions that exist in other scopes. Specifically, the key
        space associated with a key scope is comprised of the following key definitions, in order of
        precedence:</span>
         <span class="undefined_element">
            <span class="undefined_element">All key definitions from the key space associated with the parent key scope,
          if any.</span>
            <span class="undefined_element">Key definitions within the scope-defining element, including those defined in
          directly-addressed, locally-scoped submaps, but excluding those defined in child scopes.
            <span class="undefined_element">(Keys defined in child scopes cannot be addressed without
            qualifiers.)</span>
            </span>
            <span class="undefined_element">The key definitions from child scopes, with each key prepended by the child scope name
          followed by a period. If a child scope has multiple names, the keys in that scope are
          addressable from the parent scope using any of the scope names as a prefix.</span>
         </span>
         <span class="undefined_element">Because of rules 1 and 3, the key space that is associated with a child scope includes the
        scope-qualified copies of its own keys that are inherited from the key space of the parent
        scope, as well as those from other "sibling" scopes.</span>
      </span>
      <span class="undefined_element">
         <span class="undefined_element">Effective key definitions</span>
         <span class="undefined_element">A key space can contain many definitions for a given key, but only one definition is
        effective for the purpose of resolving key references.</span>
         <span class="undefined_element">When a key has a definition in the key space that is <span class="undefined_element">inherited from</span> a parent scope, that definition is effective.
        Otherwise, a key definition is effective if it is first in a breadth-first traversal of the
        locally-scoped submaps beneath the scope-defining element. <span class="undefined_element">Put
          another way, a key definition is effective if it is the first definition for that key name
          in the shallowest map that contains that key definition.</span> This allows higher-level map
        authors to override keys defined in referenced submaps.</span>
         <span class="undefined_element">A key definition that specifies more than one key name in its <span class="undefined_element">keys</span>
        attribute <span class="undefined_element">might</span> be the effective definition for some of its
        keys but not for others.</span>
         <span class="undefined_element">Within a key scope, keys do not have to be defined before they are referenced. The key
        space is effective for the entire scope, so the order of key definitions and key references
        relative to one another is not significant. <span class="undefined_element">This has the following
          implications for processors:</span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">All key spaces for a root map must be determined before any key reference processing can
          be performed.</span>
            <span class="undefined_element">Maps referenced solely by key reference have no bearing on key space contents.</span>
         </span>
         <span class="undefined_element">
            <span class="undefined_element">For purposes of key definition
          precedence, the scope-qualified key definitions from a child scope are considered to occur
          at the location of the scope-defining element within the parent scope.</span>
            <span class="undefined_element">See <span class="undefined_element">Example: How key scopes affect key precedence<span class="undefined_element">
                     <span class="undefined_element">For purposes of key definition           precedence, the scope-qualified key definitions from a child scope are considered to occur           at the location of the scope-defining element within the parent scope.</span>
                  </span>
               </span> for
          more information.</span>
         </span>
      </span>
   </div>
   <nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../archSpec/base/key-based-addressing.html" title="DITA keys provide an alternative to direct addressing. The key reference mechanism provides a layer of indirection so that resources (for example, URIs, metadata, or variable text strings) can be defined at the DITA map level instead of locally in each topic.">Indirect key-based addressing</a></div></div></nav>
</article></main>
